{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/P.R.Sheba sulthana/Downloads/TechLens/News-App/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/P.R.Sheba sulthana/Downloads/TechLens/News-App/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/P.R.Sheba sulthana/Downloads/TechLens/News-App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import NewsCard from'./NewsCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function News(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),savedArticles=_useState4[0],setSavedArticles=_useState4[1];// New state for saved articles\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setsearch=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),query=_useState8[0],setquery=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setloading=_useState10[1];var handleSearch=function handleSearch(e){search=e.target.value;setsearch(search);};var searchQuery=function searchQuery(e){e.preventDefault();query=search;setquery(query);};// Fetch the news articles\nuseEffect(function(){var getNews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,data,uniqueArticles,sortedArticles;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:url=\"https://newsapi.org/v2/everything?q=\".concat(query?query+\" \"+props.category:props.category||\"technology\",\"&apiKey=330e87d7b7a04229acbf2a4de862c4e0\");_context.prev=1;setloading(true);_context.next=5;return fetch(url);case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;// Remove Duplicate Articles Based on 'url'\nuniqueArticles=data.articles.reduce(function(acc,current){if(!acc.find(function(article){return article.url===current.url;})){acc.push(current);}return acc;},[]);sortedArticles=uniqueArticles.sort(function(a,b){return new Date(b.publishedAt)-new Date(a.publishedAt);});setArticles(sortedArticles);setloading(false);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[1,15]]);}));return function getNews(){return _ref.apply(this,arguments);};}();getNews();},[query,props.category]);// Fetch the saved articles for the current user\nuseEffect(function(){var fetchSavedArticles=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/saved-articles',{method:'GET',headers:{'Content-Type':'application/json'},credentials:'include'// Include credentials for authenticated users\n});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;setSavedArticles(data);// Store the saved articles in state\n_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error('Error fetching saved articles:',_context2.t0);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return function fetchSavedArticles(){return _ref2.apply(this,arguments);};}();fetchSavedArticles();// Fetch saved articles on component mount\n},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"news-title text-center mt-4\",children:props.category?props.category.replace('-',' '):'Top Stories'}),/*#__PURE__*/_jsx(\"div\",{className:\"container my-3\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex\",role:\"search\",onSubmit:searchQuery,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-2\",type:\"search\",placeholder:\"Search latest topics\",\"aria-label\":\"Search\",value:search,onChange:handleSearch}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success\",type:\"submit\",children:\"Search\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid mt-5 flex-wrap d-flex justify-content-evenly\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}):articles.map(function(article,index){return/*#__PURE__*/_jsx(NewsCard,{title:article.title,urlToImage:article.urlToImage,url:article.url,description:article.description,savedArticles:savedArticles// Pass saved articles to NewsCard\n},index);})})]});}export default News;","map":{"version":3,"names":["React","useEffect","useState","NewsCard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","News","props","_useState","_useState2","_slicedToArray","articles","setArticles","_useState3","_useState4","savedArticles","setSavedArticles","_useState5","_useState6","search","setsearch","_useState7","_useState8","query","setquery","_useState9","_useState10","loading","setloading","handleSearch","e","target","value","searchQuery","preventDefault","getNews","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","data","uniqueArticles","sortedArticles","wrap","_callee$","_context","prev","next","concat","category","fetch","sent","json","reduce","acc","current","find","article","push","sort","a","b","Date","publishedAt","t0","console","log","stop","apply","arguments","fetchSavedArticles","_ref2","_callee2","_callee2$","_context2","method","headers","credentials","error","children","className","replace","role","onSubmit","type","placeholder","onChange","map","index","title","urlToImage","description"],"sources":["C:/Users/P.R.Sheba sulthana/Downloads/TechLens/News-App/client/src/components/News.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport NewsCard from './NewsCard';\r\n\r\nfunction News(props) {\r\n  const [articles, setArticles] = useState([]);\r\n  const [savedArticles, setSavedArticles] = useState([]); // New state for saved articles\r\n  let [search, setsearch] = useState(\"\");\r\n  let [query, setquery] = useState(null);\r\n  const [loading, setloading] = useState(true);\r\n\r\n  const handleSearch = (e) => {\r\n    search = e.target.value;\r\n    setsearch(search);\r\n  }\r\n\r\n  const searchQuery = (e) => {\r\n    e.preventDefault();\r\n    query = search;\r\n    setquery(query);\r\n  }\r\n\r\n  // Fetch the news articles\r\n  useEffect(() => {\r\n    const getNews = async () => {\r\n      let url = `https://newsapi.org/v2/everything?q=${query ? query + \" \" + props.category : props.category || \"technology\"}&apiKey=330e87d7b7a04229acbf2a4de862c4e0`;\r\n      try {\r\n        setloading(true);\r\n        const response = await fetch(url);\r\n        const data = await response.json();\r\n\r\n        // Remove Duplicate Articles Based on 'url'\r\n        const uniqueArticles = data.articles.reduce((acc, current) => {\r\n          if (!acc.find(article => article.url === current.url)) {\r\n            acc.push(current);\r\n          }\r\n          return acc;\r\n        }, []);\r\n\r\n        const sortedArticles = uniqueArticles.sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));\r\n        setArticles(sortedArticles);\r\n        setloading(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    getNews();\r\n  }, [query, props.category]);\r\n\r\n  // Fetch the saved articles for the current user\r\n  useEffect(() => {\r\n    const fetchSavedArticles = async () => {\r\n      try {\r\n        const response = await fetch('/saved-articles', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          credentials: 'include', // Include credentials for authenticated users\r\n        });\r\n        const data = await response.json();\r\n        setSavedArticles(data); // Store the saved articles in state\r\n      } catch (error) {\r\n        console.error('Error fetching saved articles:', error);\r\n      }\r\n    };\r\n\r\n    fetchSavedArticles(); // Fetch saved articles on component mount\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1 className=\"news-title text-center mt-4\">{props.category ? props.category.replace('-', ' ') : 'Top Stories'}</h1>\r\n      <div className=\"container my-3\">\r\n        <form className=\"d-flex\" role=\"search\" onSubmit={searchQuery}>\r\n          <input className=\"form-control me-2\" type=\"search\" placeholder=\"Search latest topics\" aria-label=\"Search\" value={search} onChange={handleSearch} />\r\n          <button className=\"btn btn-outline-success\" type=\"submit\">Search</button>\r\n        </form>\r\n      </div>\r\n      <div className=\"container-fluid mt-5 flex-wrap d-flex justify-content-evenly\">\r\n        {loading ? (\r\n          <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        ) : (\r\n          articles.map((article, index) => (\r\n            <NewsCard\r\n              key={index}\r\n              title={article.title}\r\n              urlToImage={article.urlToImage}\r\n              url={article.url}\r\n              description={article.description}\r\n              savedArticles={savedArticles} // Pass saved articles to NewsCard\r\n            />\r\n          ))\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default News;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}